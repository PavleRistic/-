#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include<windows.h>
#include<string.h>
#include<time.h>
main(){J:srand(time(0));int s[79],u=0,a[64],z[64],v[89],K[76],S[79],g,t[89],b=0,c=0,d=0,j,E=0,f=0,o=1,e=0,m=0;char r[99],R[99],q[99],Q[99],k[99],V[9];strcpy(k,"i je na potezu.");strcpy(r,"i je napravio gresku i zato mora da ponovi potez.");strcpy(R,"i je odigrao ");strcpy(q," sa polja ");strcpy(Q," na polje ");system("Color 60");printf("       %c%c%c%c%c%c%c%c%c%c\n    %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n   %c%c%c%c           %c%c%c%c\n %c%c%c%c              %c%c\n%c%c%c%c\n%c%c%c                                      %c%c%c%c\n%c%c%c                                 %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c             %c%c%c            %c%c%c          %c%c%c\n%c%c%c                                %c%c%c             %c%c%c            %c%c%c            %c%c%c          %c%c%c\n%c%c%c                                 %c%c             %c%c%c            %c%c%c            %c%c%c          %c%c%c\n%c%c%c                                                %c%c%c            %c%c%c            %c%c%c          %c%c%c\n%c%c%c                                   %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c            %c%c%c            %c%c%c          %c%c%c\n%c%c%c                               %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c            %c%c%c            %c%c%c          %c%c%c\n%c%c%c                              %c%c%c               %c%c%c            %c%c%c            %c%c%c          %c%c%c\n %c%c%c                            %c%c%c                %c%c%c            %c%c%c            %c%c%c          %c%c%c\n  %c%c%c                           %c%c%c                %c%c%c            %c%c%c            %c%c%c          %c%c%c\n   %c%c%c%c            %c%c           %c%c%c                %c%c%c            %c%c%c            %c%c%c          %c%c%c\n    %c%c%c%c          %c%c%c%c           %c%c%c              %c%c%c%c            %c%c%c            %c%c%c          %c%c%c\n     %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c    	  %c%c%c            %c%c%c%c%c            %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n           %c%c%c%c%c%c%c                 %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c            %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);printf("Dobrodosli u sah.Prosirite prozor na ceo ekran.\nAko zelite da vidite brojeve table pritisnite 1.\n");scanf("%d",&c);if(c==1)while(b<64){if(b%8==0)printf("\n");g=6;if(b%2==0&&b%16<8||b%2==1&&b%16>8)g+=240;SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),g);printf(" %d ",abs(b-63)/8+11+b%8*10);b++;SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),96);}b=0,g=0;printf("\nIzaberite vrstu saha\n1.obican sah\n2.sak\n");scanf("%d",&c);if(c==2)o*=11;printf("\nAko zelite brzo upisivanje poteza pritisnite 1.\n");scanf("%d",&c);if(c==1)o*=53;system("cls");while(b<64){z[b]=0;v[abs(b-63)/8+11+b%8*10]=b;t[b]=abs(b-63)/8+11+b%8*10;s[b]=0;if(b>47)z[b]=1;if(b<16)z[b]=2;if(b>15&&b<48)a[b]=' ';else if(b-8>-1&&b-8<8||b-48>-1&&b-48<8)a[b]='p';else if(b==0||b==7||b==56||b==63)a[b]='T';else if(b==1||b==6||b==57||b==62)a[b]='s';else if(b==2||b==5||b==58||b==61)a[b]='l';else if(b==3||b==59)a[b]='D';else if(b==4||b==60)a[b]='K';b++;}b=0;if(o%11==0)while(b<64){if(b>15&&b<48)a[b]=' ';else if(b==4||b==60)a[b]='K';else{a[b]='s';}b++;}printf("Bel%s",k);while(K[65]!=2&&K[65]!=3&&f<200){f++;y:b=0;while(b<64){s[b]=0;b++;}b=0;while(b<64){c=b;while(d<64){if((z[c]==f%2+1)&&c!=d){if(a[c]=='p'&&z[c]==1&&(t[c]==t[d]-11||t[c]==t[d]+9))s[d]=1;else if(a[c]=='p'&&z[c]==2&&(t[c]==t[d]+11||t[c]==t[d]-9))s[d]=1;else if(a[c]=='s'&&(t[c]==t[d]+8||t[c]==t[d]-12||t[c]==t[d]-21||t[c]==t[d]+29||t[c]==t[d]-8||t[c]==t[d]+12||t[c]==t[d]+21||t[c]==t[d]-29))s[d]=1;else if(a[c]=='K'&&(t[c]==t[d]+1||t[c]==t[d]-1||t[c]==t[d]-10||t[c]==t[d]+10||t[c]==t[d]-11||t[c]==t[d]+11||t[c]==t[d]-9||t[c]==t[d]+9||(t[c]==t[d]+20&&a[v[t[c]-10]]==' '&&o!=-9)||(t[c]==t[d]-20&&a[v[t[c]+10]]==' '&&o!=-9)))s[d]=1;if(o%51==0)o/=51;j=t[c];if((a[c]=='T'||a[c]=='D')&&(t[c]%10==t[d]%10||t[c]/10==t[d]/10))while(j!=t[d]){if(t[c]%10==t[d]%10)j=j+10*(t[d]-t[c])/abs(t[d]-t[c]);if(t[c]/10==t[d]/10)j=j+(t[d]-t[c])/abs(t[d]-t[c]);if(o%51==0)break;s[v[j]]=1;if(a[v[j]]!=' '&&o%51!=0)o*=51;}if(o%51==0)o/=51;if((a[c]=='l'||a[c]=='D')&&(abs(t[c]/10-t[d]/10)==abs(t[d]%10-t[c]%10)))while(j!=t[d]){if(abs((t[c]-t[d])%9==0))j=j+9*(t[d]-t[c])/abs(t[d]-t[c]);else{j=j+11*(t[d]-t[c])/abs(t[d]-t[c]);}if(o%51==0)break;s[v[j]]=1;if(a[v[j]]!=' '&&o%51!=0)o*=51;}}d++;}d=0;K[b]=a[b];b++;}b=0;while(b<64){if(b%8==0)printf("\n\t\t\t\t");g=6;if(z[b]==1)g=9;if(z[b]==2)g=12;if(b%2==0&&b%16<8||b%2==1&&b%16>8)g+=240;if(b%8==0){j=b-24;while(j!=b){SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),96);if(j==b-8||j==b-16)printf("\n\t\t\t\t");if(j!=b-24){if(z[b+(j+32)%8]==1)g+=3;if(z[b+(j+32)%8]==2)g+=6;}SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),g);if(a[b+(j+32)%8]=='p'&&j>b-9){printf("        %c%c       ",219,219);}else if(a[b+(j+32)%8]=='s'&&j>b-17)printf("      %c%c%c%c%c%c%c    ",219,219,219,219,219,219,219);else if(a[b+(j+32)%8]=='T'&&j>b-9)printf("      %c%c%c%c%c%c     ",219,219,219,219,219,219);else if(a[b+(j+32)%8]=='T'&&j>b-17)printf("      %c %c%c %c     ",219,219,219,219);else if(a[b+(j+32)%8]=='l'&&j>b-17&&j<b-9)printf("        %c        ",219);else if(a[b+(j+32)%8]=='l'&&j>b-17)printf("       %c%c%c       ",219,219,219);else if(a[b+(j+32)%8]=='K'&&j>b-17){printf("      %c%c%c%c%c      ",219,219,219,219,219);}else if(a[b+(j+32)%8]=='D'&&j>b-17){printf("       %c%c%c       ",219,219,219);}else printf("                 ");if(g>200)g=6;else g=246;j++;}SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),96);printf("\n\t\t\t\t");}g=6;if(z[b]==1)g=9;if(z[b]==2)g=12;if(b%2==0&&b%16<8||b%2==1&&b%16>8)g+=240;SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),g);if(a[b]=='p')printf("       %c%c%c%c      ",219,219,219,219);else if(a[b]=='D')printf("        %c        ",219,219,219,219,219,219);else if(a[b]=='K')printf("       %c%c%c       ",219,219,219);else if(a[b]=='s')printf("     %c%c%c%c%c       ",219,219,219,219);else if(a[b]=='l')printf("       %c%c%c       ",219,219,219);else if(a[b]=='T')printf("      %c%c%c%c%c%c     ",219,219,219,219,219,219);else printf("                 ");b++;SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),96);if(b%8==0&&b!=0){printf("\n\t\t\t\t");j=b-24;while(j!=b){if(j==b-8||j==b-16)printf("\n\t\t\t\t");if(g>200)g=6;else g=246;if(z[b+(j+16)%8-8]==1)g+=3;if(z[b+(j+16)%8-8]==2)g+=6;SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),g);if(a[b+(j+16)%8-8]==' ')printf("                 ");else if(a[b+(j+16)%8-8]=='p'&&j<b-8)printf("       %c%c%c%c      ",219,219,219,219);else if(a[b+(j+16)%8-8]=='p')printf("      %c%c%c%c%c%c     ",219,219,219,219,219,219);else if(a[b+(j+16)%8-8]=='T'){printf("      %c%c%c%c%c%c     ",219,219,219,219,219,219);}else if(a[b+(j+16)%8-8]=='D')printf("      %c%c%c%c%c      ",219,219,219,219,219);else if(a[b+(j+16)%8-8]=='s')printf("     %c%c%c%c%c       ",219,219,219,219,219);else if(a[b+(j+16)%8-8]=='l'){printf("       %c%c%c       ",219,219,219);}else if(a[b+(j+16)%8-8]=='K'){printf("       %c%c%c       ",219,219,219);}else{printf("                 ");}j++;SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),96);}SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),96);}}b=0;printf("\n");if(o%53!=0)scanf("%d%d",&c,&d);else{scanf("%d",&c);d=c%100;c=c/100;}c=v[c];d=v[d];K[d]=K[c];K[c]=' ';system("cls");j=t[c];while(b<64){if(a[b]=='K'&&z[b]==f%2+2-f%2*2)e=b;S[b]=0;b++;}b=0;while(b<64){if(a[b]=='K'&&b!=e)E=b;b++;}b=0;K[65]=0;while(b<64){while(m<64){if((z[b]==f%2+1)&&b!=m&&b!=d){if(K[b]=='p'&&z[b]==1&&(t[b]==t[m]-11||t[b]==t[m]+9))S[m]=1;else if(K[b]=='p'&&z[b]==2&&(t[b]==t[m]+11||t[b]==t[m]-9))S[m]=1;else if(K[b]=='s'&&(t[b]==t[m]+8||t[b]==t[m]-12||t[b]==t[m]-21||t[b]==t[m]+29||t[b]==t[m]-8||t[b]==t[m]+12||t[b]==t[m]+21||t[b]==t[m]-29))S[m]=1;else if(K[b]=='K'&&(t[b]==t[m]+1||t[b]==t[m]-1||t[b]==t[m]-10||t[b]==t[m]+10||t[b]==t[m]-11||t[b]==t[m]+11||t[b]==t[m]-9||t[b]==t[m]+9||(t[b]==t[m]+20&&K[v[t[b]-10]]==' '&&o!=-9)||(t[b]==t[m]-20&&K[v[t[b]+10]]==' '&&o!=-9)))S[m]=1;if(o%51==0)o/=51;j=t[b];if((K[b]=='T'||K[b]=='D')&&(t[b]%10==t[m]%10||t[b]/10==t[m]/10))while(j!=t[m]){if(t[b]%10==t[m]%10)j=j+10*(t[m]-t[b])/abs(t[m]-t[b]);if(t[b]/10==t[m]/10)j=j+(t[m]-t[b])/abs(t[m]-t[b]);if(o%51==0)break;S[v[j]]=1;if(K[v[j]]!=' '&&o%51!=0)o*=51;}if(o%51==0)o/=51;if((K[b]=='l'||K[b]=='D')&&(abs(t[b]/10-t[m]/10)==abs(t[m]%10-t[b]%10)))while(j!=t[m]){if(abs(t[b]-t[m])%9==0)j=j+9*(t[m]-t[b])/abs(t[m]-t[b]);else{j=j+11*(t[m]-t[b])/abs(t[m]-t[b]);}if(o%51==0)break;S[v[j]]=1;if(K[v[j]]!=' '&&o%51!=0)o*=51;}}m++;}m=0;b++;}b=0;j=t[c];if((S[e]==1&&a[c]!='K')||(S[d]==1&&a[c]=='K'))K[65]=1;K[67]=0;while(b<64){S[b]=0;b++;}b=0;g=0;while(b<64){while(m<64){if((z[b]==f%2+1)&&b!=m&&b!=m&&z[b]>0&&z[b]!=z[m]){if(K[b]=='p'&&(z[b]==1)&&((t[b]==t[m]-1&&K[m]==' ')||(t[b]==t[m]-2&&t[b]%10==2&&K[v[t[m]-1]]==' ')||(t[b]==t[m]-11&&K[m]!=' '||t[b]==t[m]+9&&K[m]!=' ')||((t[b]==t[m]-11&&K[m]==' '||t[b]==t[m]+9&&K[m]==' ')&&(u==t[m]-1||u==t[m]+1)&&(K[v[t[m]-1]]=='p'||K[v[t[m]+1]]=='p'))))g=1;else if(K[b]=='p'&&(z[b]==2)&&((t[b]==t[m]+1&&K[m]==' ')||(t[b]==t[m]+2&&t[b]%10==7&&K[v[t[m]+1]]==' ')||(t[b]==t[m]+11&&K[m]!=' '||t[b]==t[m]-9&&K[m]!=' ')))g=1;else if(K[b]=='T'&&(t[b]%10==t[m]%10||t[b]/10==t[m]/10))g=1;else if(K[b]=='l'&&(abs(t[b]/10-t[m]/10)==abs(t[m]%10-t[b]%10)))g=1;else if(K[b]=='D'&&(t[b]%10==t[m]%10||t[b]/10==t[m]/10||abs(t[b]/10-t[m]/10)==abs(t[m]%10-t[b]%10)))g=1;else if(K[b]=='s'&&(t[b]==t[m]+8||t[b]==t[m]-12||t[b]==t[m]-21||t[b]==t[m]+19||t[b]==t[m]-8||t[b]==t[m]+12||t[b]==t[m]+21||t[b]==t[m]-19))g=1;else if(K[b]=='K'&&z[b]!=z[m]&&(t[b]==t[m]+1||t[b]==t[m]-1||t[b]==t[m]-10||t[b]==t[m]+10||t[b]==t[m]-11||t[b]==t[m]+11||t[b]==t[m]-9||t[b]==t[m]+9||(f%3==z[b]&&((t[b]==t[m]+20&&K[v[t[b]-10]]==' '&&s[v[t[b]-10]]>0&&o%2!=0)||(t[b]==t[m]-20&&K[v[t[b]+10]]==' '&&s[v[t[b]+10]]>0&&o%2!=0))))){g=1;if(f%3==z[b]&&((t[b]==t[m]+20&&K[v[t[b]-10]]==' '&&s[v[t[b]-10]]>0&&o%2!=0)||(t[b]==t[m]-20&&K[v[t[b]+10]]==' '&&s[v[t[b]+10]]>0&&o%2!=0))){if(K[b]==K[v[51]]&&K[m]==K[v[71]]&&o%2!=0&&o%19!=0){K[v[81]]=' ';K[v[61]]='T';z[v[81]]=0;z[v[61]]=1;}else if(K[b]==K[v[51]]&&K[m]==K[v[31]]&&o%2!=0&&o%17!=0){K[v[11]]=' ';K[v[41]]='T';z[v[11]]=0;z[v[41]]=1;}else if(K[b]==K[v[58]]&&K[m]==K[v[38]]&&o%13!=0&&o%23!=0){K[v[18]]=' ';K[v[48]]='T';z[v[18]]=0;z[v[48]]=2;}else if(K[b]==K[v[58]]&&K[m]==K[v[78]]&&o%13!=0&&o%29!=0){K[v[88]]=' ';K[v[68]]='T';z[v[88]]=0;z[v[68]]=2;}else{g=0;}}}j=t[b];if((K[b]=='T'||(K[b]=='D'&&(t[b]%10==t[m]%10||t[b]/10==t[m]/10)))&&g==1)while(j!=t[m]){if(t[b]%10==t[m]%10)j=j+10*(t[m]-t[b])/abs(t[m]-t[b]);if(t[b]/10==t[m]/10)j=j+(t[m]-t[b])/abs(t[m]-t[b]);if(K[v[j]]!=' '&&j!=t[m])g=0;}if((K[b]=='l'||(K[b]=='D'&&(abs(t[b]/10-t[m]/10)==abs(t[m]%10-t[b]%10))))&&g==1)while(j!=t[m]){if(abs(t[b]-t[m])%9==0)j=j+9*(t[m]-t[b])/abs(t[m]-t[b]);else{j=j+11*(t[m]-t[b])/abs(t[m]-t[b]);}if(K[v[j]]!=' '&&j!=t[m])g=0;}if(g>0){K[68]=K[b];K[69]=K[m];K[m]=K[b];K[b]=' ';K[67]=b*100+m;b=0;m=0;while(b<64){while(m<64){if((z[b]!=f%2+1||(z[b]==f%2+1&&(b==K[67]/100||b==d)))&&b!=m){if(K[b]=='p'&&z[b]==1&&(t[b]==t[m]-11||t[b]==t[m]+9))S[m]=1;else if(K[b]=='p'&&z[b]==2&&(t[b]==t[m]+11||t[b]==t[m]-9))S[m]=1;else if(K[b]=='s'&&(t[b]==t[m]+8||t[b]==t[m]-12||t[b]==t[m]-21||t[b]==t[m]+29||t[b]==t[m]-8||t[b]==t[m]+12||t[b]==t[m]+21||t[b]==t[m]-29))S[m]=1;else if(K[b]=='K'&&(t[b]==t[m]+1||t[b]==t[m]-1||t[b]==t[m]-10||t[b]==t[m]+10||t[b]==t[m]-11||t[b]==t[m]+11||t[b]==t[m]-9||t[b]==t[m]+9||(t[b]==t[m]+20&&K[v[t[b]-10]]==' '&&o!=-9)||(t[b]==t[m]-20&&K[v[t[b]+10]]==' '&&o!=-9)))S[m]=1;if(o%51==0)o/=51;j=t[b];if((K[b]=='T'||K[b]=='D')&&(t[b]%10==t[m]%10||t[b]/10==t[m]/10))while(j!=t[m]){if(t[b]%10==t[m]%10)j=j+10*(t[m]-t[b])/abs(t[m]-t[b]);if(t[b]/10==t[m]/10)j=j+(t[m]-t[b])/abs(t[m]-t[b]);if(o%51==0)break;S[v[j]]=1;if(K[v[j]]!=' '&&o%51!=0)o*=51;}if(o%51==0)o/=51;if((K[b]=='l'||K[b]=='D')&&(abs(t[b]/10-t[m]/10)==abs(t[m]%10-t[b]%10)))while(j!=t[m]){if(abs(t[b]-t[m])%9==0)j=j+9*(t[m]-t[b])/abs(t[m]-t[b]);else{j=j+11*(t[m]-t[b])/abs(t[m]-t[b]);}if(o%51==0)break;S[v[j]]=1;if(K[v[j]]!=' '&&o%51!=0)o*=51;}}m++;}m=0;b++;}b=0;j=t[c];b=K[67]/100;m=K[67]%100;if((S[E]<1&&K[b]!='K')||(S[m]<1&&K[b]=='K'))goto U;K[b]=K[68];K[m]=K[69];while(b<64){S[b]=0;b++;}b=0;b=K[67]/100;}}g=0;m++;}m=0;b++;}if(S[E]>0)K[66]=1;else K[66]=2;goto T;U:K[66]=0;m=0;b=0;j=t[c];g=0;if(a[c]=='p'&&((t[c]==t[d]+2&&t[c]%10==7&&a[v[t[d]+1]]==' ')||(t[c]==t[d]-2&&t[c]%10==2&&a[v[t[d]-1]]==' ')))u=t[d];if(a[c]=='p'&&(z[c]==1)&&((t[c]==t[d]-1&&a[d]==' ')||(t[c]==t[d]-2&&t[c]%10==2&&a[v[t[d]-1]]==' ')||(t[c]==t[d]-11&&a[d]!=' '||t[c]==t[d]+9&&a[d]!=' ')||((t[c]==t[d]-11&&a[d]==' '||t[c]==t[d]+9&&a[d]==' ')&&(u==t[d]-1||u==t[d]+1)&&(a[v[t[d]-1]]=='p'||a[v[t[d]+1]]=='p'))))g=1;else if(a[c]=='p'&&(z[c]==2)&&((t[c]==t[d]+1&&a[d]==' ')||(t[c]==t[d]+2&&t[c]%10==7&&a[v[t[d]+1]]==' ')||(t[c]==t[d]+11&&a[d]!=' '||t[c]==t[d]-9&&a[d]!=' ')))g=1;else if(a[c]=='T'&&(t[c]%10==t[d]%10||t[c]/10==t[d]/10))g=1;else if(a[c]=='l'&&(abs(t[c]/10-t[d]/10)==abs(t[d]%10-t[c]%10)))g=1;else if(a[c]=='D'&&(t[c]%10==t[d]%10||t[c]/10==t[d]/10||abs(t[c]/10-t[d]/10)==abs(t[d]%10-t[c]%10)))g=1;else if(a[c]=='s'&&(t[c]==t[d]+8||t[c]==t[d]-12||t[c]==t[d]-21||t[c]==t[d]+19||t[c]==t[d]-8||t[c]==t[d]+12||t[c]==t[d]+21||t[c]==t[d]-19))g=1;else if(a[c]=='K'&&z[c]!=z[d]&&(t[c]==t[d]+1||t[c]==t[d]-1||t[c]==t[d]-10||t[c]==t[d]+10||t[c]==t[d]-11||t[c]==t[d]+11||t[c]==t[d]-9||t[c]==t[d]+9||(f%3==z[c]&&((t[c]==t[d]+20&&a[v[t[c]-10]]==' '&&s[v[t[c]-10]]<1&&o%2!=0)||(t[c]==t[d]-20&&a[v[t[c]+10]]==' '&&s[v[t[c]+10]]<1&&o%2!=0))))){g=1;if(f%3==z[c]&&((t[c]==t[d]+20&&a[v[t[c]-10]]==' '&&s[v[t[c]-10]]<1&&o%2!=0)||(t[c]==t[d]-20&&a[v[t[c]+10]]==' '&&s[v[t[c]+10]]<1&&o%2!=0))){if(a[c]==a[v[51]]&&a[d]==a[v[71]]&&o%2!=0&&o%19!=0){a[v[81]]=' ';a[v[61]]='T';z[v[81]]=0;z[v[61]]=1;}else if(a[c]==a[v[51]]&&a[d]==a[v[31]]&&o%2!=0&&o%17!=0){a[v[11]]=' ';a[v[41]]='T';z[v[11]]=0;z[v[41]]=1;}else if(a[c]==a[v[58]]&&a[d]==a[v[38]]&&o%13!=0&&o%23!=0){a[v[18]]=' ';a[v[48]]='T';z[v[18]]=0;z[v[48]]=2;}else if(a[c]==a[v[58]]&&a[d]==a[v[78]]&&o%13!=0&&o%29!=0){a[v[88]]=' ';a[v[68]]='T';z[v[88]]=0;z[v[68]]=2;}else{g=0;}}}if((a[c]=='T'||(a[c]=='D'&&(t[c]%10==t[d]%10||t[c]/10==t[d]/10)))&&g==1)while(j!=t[d]){if(t[c]%10==t[d]%10)j=j+10*(t[d]-t[c])/abs(t[d]-t[c]);if(t[c]/10==t[d]/10)j=j+(t[d]-t[c])/abs(t[d]-t[c]);if(a[v[j]]!=' '&&j!=t[d])b=1;}if((a[c]=='l'||(a[c]=='D'&&(abs(t[c]/10-t[d]/10)==abs(t[d]%10-t[c]%10))))&&g==1)while(j!=t[d]){if(abs(t[c]-t[d])%9==0)j=j+9*(t[d]-t[c])/abs(t[d]-t[c]);else{j=j+11*(t[d]-t[c])/abs(t[d]-t[c]);}if(a[v[j]]!=' '&&j!=t[d])b=1;}if(f%2!=0&&(z[c]==2||z[c]==0||c==d||z[c]==z[d]||g!=1||b==1||K[65]==1)){printf("\nBel%s",r);goto y;}else if(f%2==0&&(z[c]==1||z[c]==0||c==d||z[c]==z[d]||g!=1||b==1||K[65]==1)){printf("\nCrn%s",r);goto y;}if(t[c]==51)o*=2;if(t[c]==58)o*=13;if(t[c]==11)o*=17;if(t[c]==81)o*=19;if(t[c]==18)o*=23;if(t[c]==88)o*=29;a[d]=a[c];a[c]=' ';j=z[c];z[c]=z[d];z[d]=j;if(a[d]=='p'&&(t[d]%10==1||t[d]%10==8)){printf("\nPritisnite\n1 za kraljicu\n2 za konja\n3 za topa\n4 za lovca\n");scanf("%d",&g);if(g<2)a[d]='D';if(g==2)a[d]='s';if(g==3)a[d]='T';if(g>3)a[d]='l';}if(a[d]=='p')strcpy(V,"pesaka");if(a[d]=='s')strcpy(V,"konja");if(a[d]=='K')strcpy(V,"kralja");if(a[d]=='D')strcpy(V,"kraljicu");if(a[d]=='l')strcpy(V,"lovca");if(a[d]=='T')strcpy(V,"topa");if(f%2!=0)printf("\nBel%s%s%s%d%s%d.\nCrn%s",R,V,q,t[c],Q,t[d],k);else{printf("\nCrn%s%s%s%d%s%d.\nBel%s",R,V,q,t[c],Q,t[d],k);}}T:if(K[66]==1&&f%2<2)printf("\nBeli je pobedio.");else if(K[66]==1&&f%2<2)printf("\nCrni je pobedio.");else printf("\nPat.");printf("\nAko zelite da izadjete iz Sasa pritisnite 0,ako ne pritisnite bilo koje drugo dugme da bi ste nastavili.");scanf("%d",&g);if(g==0)return 0;system("cls");goto J;}
